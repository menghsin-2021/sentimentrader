<!DOCTYPE html>
<html lang="en" xmlns="http://www.w3.org/1999/html">
<head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
          integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
    <!-- form CSS -->
    <link href="/static/css/dashboard.css" rel="stylesheet">
    <link href="/static/css/strategy.css" rel="stylesheet">

    <!--      plotly-->
    <script src="https://cdn.plot.ly/plotly-2.4.2.min.js"></script>
</head>
<body>
<nav class="navbar navbar-dark bg-primary flex-md-nowapr fixed-top p-0 shadow">
    <a class="navbar-brand col-sm-3 col-md-2 mr-0" href="#">Sentimentrader</a>
    <ul class="navbar-nav px-3">
        <li class="nav-item text-nowarp">
            <a class="nav-link" href="#">Logout</a>
        </li>
    </ul>
</nav>

<div class="container-fluid">
    <div class="row">
        <!--     siderbar -->
        <div class="col-md-2 bg-light d-md-block sidebar">
            <div class="left-sidebar">
                <ul class="nav nav-pills flex-column mb-auto">
                    <li class="nav-item">
                        <a href="/home.html" class="nav-link link-dark" aria-current="page">
                            <svg class="bi me-2" width="16" height="16">
                                <use xlink:href="#home"></use>
                            </svg>
                            Home
                        </a>
                    </li>
                    <li>
                        <a href="/social_volume.html" class="nav-link link-dark">
                            <svg class="bi me-2" width="16" height="16">
                                <use xlink:href="#speedometer2"></use>
                            </svg>
                            Social volume
                        </a>
                    </li>
                    <li>
                        <a href="/sentiment.html" class="nav-link link-dark">
                            <svg class="bi me-2" width="16" height="16">
                                <use xlink:href="#table"></use>
                            </svg>
                            Sentiment
                        </a>
                    </li>
                    <li>
                        <a href="/strategy.html" class="nav-link link-dark">
                            <svg class="bi me-2" width="16" height="16">
                                <use xlink:href="#grid"></use>
                            </svg>
                            Strategy
                        </a>
                    </li>
                    <li>
                        <a href="/backtest.html" class="nav-link active">
                            <svg class="bi me-2" width="16" height="16">
                                <use xlink:href="#people-circle"></use>
                            </svg>
                            Backtest
                        </a>
                    </li>
                </ul>

            </div>
            <!-- figure       -->
        </div>
    </div>
</div>
<!--Main element-->
<main role="main" class="col-md-9 ml-sm-auto col-lg-10 px-4">
    <div class="content d-flex flex-column mr-2">
        <div class="strategy_card">
                <h2>策略卡牌</h2>
                <br>
                <div class="card-deck">
                    <div class="card col-2 p-2 bg-light border-dark">
                        <div class="card-body">
                            <h4 class="card-title">交易策略 1 號</h4>
                            <ul>
                                <li>勝率</li>
                                <li>年化報酬率</li>
                                <li>總報酬率</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card col-2 p-2 bg-light border-dark">
                        <div class="card-body">
                            <h4 class="card-title">交易策略 2 號</h4>
                            <ul>
                                <li>勝率</li>
                                <li>年化報酬率</li>
                                <li>總報酬率</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card col-2 p-2 bg-light border-dark">
                        <div class="card-body">
                            <h4 class="card-title">交易策略 3 號</h4>
                            <ul>
                                <li>勝率</li>
                                <li>年化報酬率</li>
                                <li>總報酬率</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card col-2 p-2 bg-light border-dark">
                        <div class="card-body">
                            <h4 class="card-title">交易策略 4 號</h4>
                            <ul>
                                <li>勝率</li>
                                <li>年化報酬率</li>
                                <li>總報酬率</li>
                            </ul>
                        </div>
                    </div>
                    <div class="card col-2 p-2 bg-light border-dark">
                        <div class="card-body">
                            <h4 class="card-title">交易策略 5 號</h4>
                            <ul>
                                <li>勝率</li>
                                <li>年化報酬率</li>
                                <li>總報酬率</li>
                            </ul>
                        </div>
                    </div>
                </div>
                <br>
                <br>
        </div>

        <div class="content d-flex flex-row mr-2">
            <div class="report figure col-9">
                <div class="figure">
                    <img src="{{ backtest_report['file_path'] | safe }}" alt="back test result" width="900" height="600">
                </div>
            </div>


            <div class="report_content d-flex flex-column col-3">
                <div class="report_information d-flex flex-row justify-content-between">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">項目</th>
                          <th scope="col">結果</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <th scope="row">1</th>
                          <td>買進次數</td>
                            <td>{{ backtest_report['total_buy_count'] | safe}}</td>
                        </tr>
                        <tr>
                          <th scope="row">2</th>
                          <td>賣出次數</td>
                          <td>{{ backtest_report['total_sell_count'] | safe}}</td>
                        </tr>
                        <tr>
                          <th scope="row">3</th>
                          <td>總報酬率(淨收益)</td>
                           <td>{{ backtest_report['total_return_rate'] | safe}}%</td>
                        </tr>
                      <tr>
                          <th scope="row">4</th>
                          <td>該策略最高報酬為</td>
                           <td>{{ backtest_report['highest_return'] | safe}}%</td>
                        </tr>
                      <tr>
                          <th scope="row">5</th>
                          <td>該策略最低報酬為</td>
                           <td>{{ backtest_report['lowest_return'] | safe}}%</td>
                        </tr>
                      <tr>
                          <th scope="row">6</th>
                          <td>總獲利次數</td>
                           <td>{{ backtest_report['total_win'] | safe}}</td>
                        </tr>
                      <tr>
                          <th scope="row">7</th>
                          <td>總虧損次數</td>
                           <td>{{ backtest_report['total_lose'] | safe}}</td>
                        </tr>
                      <tr>
                          <th scope="row">8</th>
                          <td>總交易次數</td>
                           <td>{{ backtest_report['total_trade'] | safe}}</td>
                        </tr>
                      <tr>
                          <th scope="row">9</th>
                          <td>勝率</td>
                           <td>{{ backtest_report['win_rate'] | safe}}%</td>
                        </tr>
                      <tr>
                          <th scope="row">10</th>
                          <td>該策略平均每次報酬為</td>
                           <td>{{ backtest_report['avg_return_rate'] | safe}}%</td>
                        </tr>
                      <tr>
                          <th scope="row">11</th>
                          <td>年化報酬率</td>
                           <td>{{ backtest_report['irr'] | safe}}%</td>
                        </tr>
                      </tbody>
                    </table>
                </div>

                <form action="/send_strategy" method="POST">
                    <div class="d-flex flex-row justify-content-end">

                        <div>
                            <button type="submit" class="btn btn-primary mr-3" id="clear-setting" value="clear-setting">捨棄策略
                            </button>
                        </div>

                        <div>
                            <button type="submit" class="btn btn-primary mr-3" id="sent-backtest" value="sent-backtest">重新回測
                            </button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
</main>



<script src="/static/js/strategy.js"></script>


</body>

</html>